<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[contains(@class, 'pos-receipt')]" position="inside">
            <t t-set="data" t-value="(props &amp;&amp; (props.data || props.receipt || props.order_receipt || props.orderReceipt || props)) || {}"/>
            <t t-set="einvoice" t-value="(data &amp;&amp; data.einvoice) || {}"/>
            <t t-set="dtype" t-value="einvoice.document_type || ''"/>
            <t t-set="status" t-value="einvoice.status || 'pending'"/>

            <div class="cr-fe-extra">
                <div class="cr-divider"></div>

                <div class="cr-center cr-doc-type">
                    <t t-if="dtype == 'te'">Tiquete electrónico</t>
                    <t t-elif="dtype == 'fe'">Factura electrónica</t>
                    <t t-elif="dtype == 'nc'">Nota de crédito electrónica</t>
                    <t t-else="">Comprobante</t>
                </div>

                <t t-if="einvoice.consecutivo">
                    <div class="cr-center cr-small">
                        Consecutivo: <t t-esc="einvoice.consecutivo"/>
                    </div>
                </t>

                <div class="cr-block">
                    <div class="cr-title">Clave</div>
                    <t t-if="einvoice.clave">
                        <div class="cr-mono cr-wrap"><t t-esc="einvoice.clave"/></div>
                    </t>
                    <t t-else="">
                        <div class="cr-small">Pendiente</div>
                    </t>
                </div>

                <div class="cr-center cr-small">
                    Estado FE:
                    <t t-if="status == 'accepted'">Aceptado</t>
                    <t t-elif="status == 'rejected'">Rechazado</t>
                    <t t-elif="status == 'processing'">Procesando</t>
                    <t t-elif="status == 'sent'">Enviado</t>
                    <t t-else="">Pendiente</t>
                </div>
            </div>
        </xpath>
    </t>
</templates>
